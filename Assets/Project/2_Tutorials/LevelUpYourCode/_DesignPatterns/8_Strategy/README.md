# ğŸ® Strategy Pattern (ì „ëµ íŒ¨í„´)

## ğŸ“‹ ëª©ì°¨
- [íŒ¨í„´ ê°œìš”](#-íŒ¨í„´-ê°œìš”)
- [ì™œ Strategy Patternì´ í•„ìš”í•œê°€?](#-ì™œ-strategy-patternì´-í•„ìš”í•œê°€)
- [í•µì‹¬ êµ¬ì„±ìš”ì†Œ](#-í•µì‹¬-êµ¬ì„±ìš”ì†Œ)
- [ì½”ë“œ êµ¬ì¡°](#-ì½”ë“œ-êµ¬ì¡°)
- [ì‹¤í–‰ íë¦„](#-ì‹¤í–‰-íë¦„)
- [ì£¼ìš” ì½”ë“œ ë¶„ì„](#-ì£¼ìš”-ì½”ë“œ-ë¶„ì„)
- [ì¥ë‹¨ì ](#-ì¥ë‹¨ì )
- [ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€](#-ì‹¤ì œ-ì‚¬ìš©-ì‚¬ë¡€)
- [State Patternê³¼ì˜ ë¹„êµ](#-state-patternê³¼ì˜-ë¹„êµ)
- [í•™ìŠµ ì •ë¦¬](#-í•™ìŠµ-ì •ë¦¬)

---

## ğŸ¯ íŒ¨í„´ ê°œìš”

**Strategy Pattern**ì€ **í–‰ë™ íŒ¨í„´(Behavioral Pattern)** ì¤‘ í•˜ë‚˜ë¡œ, ì•Œê³ ë¦¬ì¦˜(ë™ì‘)ì„ ìº¡ìŠí™”í•˜ì—¬ ìƒí™©ì— ë”°ë¼ ììœ ë¡­ê²Œ êµì²´í•  ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

ë¹„ìŠ·í•œ ëª©ì ì˜ í–‰ë™ë“¤ì´ ì„¸ë¶€ êµ¬í˜„ë§Œ ë‹¤ë¥¼ ë•Œ ê°€ì¥ ìœ ìš©í•˜ë©°, ë¬´ê¸° ì‹œìŠ¤í…œì—ì„œ ì¹¼ â†’ ì´ìœ¼ë¡œ ì „í™˜í•˜ë“¯ **"ì „ëµì´ë¼ëŠ” ë¶€í’ˆë§Œ ê°ˆì•„ ë¼ìš°ëŠ”"** ê°œë…ì…ë‹ˆë‹¤.

### ğŸ“Œ í•µì‹¬ ê°œë…

```
ì•Œê³ ë¦¬ì¦˜ì„ ë³„ë„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬
ëŸ°íƒ€ì„ì— ììœ ë¡­ê²Œ êµì²´í•  ìˆ˜ ìˆê²Œ í•œë‹¤!
```

**ì¼ë°˜ì ì¸ ë°©ë²• :**
```csharp
// switch-caseë¡œ ìŠ¤í‚¬ ë¶„ê¸°
public void UseAbility(AbilityType type)
{
    switch (type)
    {
        case AbilityType.AirSupport : CallAirStrike(); break;
        case AbilityType.FirstAid   : HealPlayer();    break;
        case AbilityType.Radar      : ShowRadar();     break;
    }
}
// âŒ ë¬¸ì œ : ìŠ¤í‚¬ ì¶”ê°€ ì‹œë§ˆë‹¤ switchë¬¸ ìˆ˜ì •, ìŠ¤íŒŒê²Œí‹° ì½”ë“œí™”
```

**Strategy Pattern :**
```csharp
// í˜„ì¬ ì „ëµ ê°ì²´ì—ê²Œ ìœ„ì„
m_CurrentAbility.Use(gameObject);
// âœ… ì¥ì  : ìŠ¤í‚¬ ì¶”ê°€ ì‹œ ìƒˆ í´ë˜ìŠ¤ë§Œ ìƒì„±, OCP ì¤€ìˆ˜!
```

---

## ğŸ¤” ì™œ Strategy Patternì´ í•„ìš”í•œê°€?

### ë¬¸ì œ ìƒí™©

ê²Œì„ì—ì„œ íŠ¹ìˆ˜ ëŠ¥ë ¥(Ability) ì‹œìŠ¤í…œì„ ë§Œë“¤ ë•Œ, ì¼ë°˜ì ìœ¼ë¡œ ì´ë ‡ê²Œ ì‘ì„±í•©ë‹ˆë‹¤ :

```csharp
public class AbilityRunner : MonoBehaviour
{
    public enum AbilityType { AirSupport, FirstAid, Radar }
    public AbilityType currentAbility;

    public void UseAbility()
    {
        switch (currentAbility)
        {
            case AbilityType.AirSupport :
                Debug.Log("í•­ê³µ ì§€ì› ìš”ì²­!");
                PlayAirSupportParticle();
                PlayAirSupportSound();
                break;

            case AbilityType.FirstAid :
                Debug.Log("ì‘ê¸‰ì²˜ì¹˜ ì‹¤í–‰!");
                HealPlayer(50);
                PlayFirstAidParticle();
                break;

            case AbilityType.Radar :
                Debug.Log("ë ˆì´ë” í™œì„±í™”!");
                ActivateRadar(30f);
                PlayRadarSound();
                break;
        }
    }
}
```

**ì´ ì½”ë“œì˜ ë¬¸ì œì  :**

âŒ **í™•ì¥ ì–´ë ¤ì›€ (OCP ìœ„ë°˜)**
   - ìƒˆë¡œìš´ ìŠ¤í‚¬ ì¶”ê°€ ì‹œë§ˆë‹¤ switchë¬¸ì— case ì¶”ê°€ í•„ìš”
   - ìŠ¤í‚¬ì´ ë§ì•„ì§ˆìˆ˜ë¡ ì½”ë“œê°€ ìˆ˜ë°±~ìˆ˜ì²œ ì¤„ë¡œ ë¹„ëŒ€í•´ì§

âŒ **ë‹¨ì¼ ì±…ì„ ìœ„ë°˜ (SRP ìœ„ë°˜)**
   - AbilityRunnerê°€ ëª¨ë“  ëŠ¥ë ¥ì˜ ë¡œì§ì„ ì§ì ‘ ê´€ë¦¬
   - ì„œë¡œ ë¬´ê´€í•œ ìŠ¤í‚¬ ì½”ë“œê°€ í•œ ê³³ì— ë’¤ì„ì„

âŒ **ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥**
   - íŠ¹ì • ëŠ¥ë ¥ì˜ ë¡œì§ë§Œ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
   - ë¹„ìŠ·í•œ ëŠ¥ë ¥ì´ ë‹¤ë¥¸ ìºë¦­í„°ì— í•„ìš”í•˜ë©´ ì½”ë“œ ë³µì‚¬

âŒ **ìŠ¤íŒŒê²Œí‹° ì½”ë“œ**
   - ë¡œì§ ì¶”ê°€ ì‹œ ì ì  ë³µì¡í•´ì§€ëŠ” ë‹¨ì¼ í•¨ìˆ˜
   - ìœ ì§€ë³´ìˆ˜ ì‹œ ë²„ê·¸ ì¶”ì ì´ ì–´ë ¤ì›€

### Strategy Patternì˜ í•´ê²°ì±…

âœ… **ì•Œê³ ë¦¬ì¦˜ ìº¡ìŠí™”**
   - ê° ëŠ¥ë ¥ì´ ë…ë¦½ëœ í´ë˜ìŠ¤ë¡œ ìº¡ìŠí™”
   - ëŠ¥ë ¥ë³„ ë¡œì§ì´ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬ë¨

âœ… **ì‰¬ìš´ í™•ì¥ (OCP ì¤€ìˆ˜)**
   - ìƒˆë¡œìš´ ëŠ¥ë ¥ ì¶”ê°€ ì‹œ ìƒˆ í´ë˜ìŠ¤ë§Œ ìƒì„±
   - ê¸°ì¡´ AbilityRunner ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

âœ… **ëŸ°íƒ€ì„ êµì²´**
   - ê²Œì„ ì‹¤í–‰ ì¤‘ í”Œë ˆì´ì–´ ìƒíƒœì— ë”°ë¼ ì¦‰ê° ëŠ¥ë ¥ ë³€ê²½
   - ì¸ìŠ¤í™í„°ì—ì„œ ScriptableObjectë¡œ êµì²´ ê°€ëŠ¥

âœ… **ë‹¨ì¼ ì±…ì„ ì¤€ìˆ˜ (SRP)**
   - AbilityRunnerëŠ” "í˜„ì¬ ëŠ¥ë ¥ì„ ì‹¤í–‰"í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹
   - ê° Ability í´ë˜ìŠ¤ëŠ” ìê¸° ëŠ¥ë ¥ì˜ ë¡œì§ë§Œ ë‹´ë‹¹

---

## ğŸ—ï¸ í•µì‹¬ êµ¬ì„±ìš”ì†Œ

Strategy Patternì€ ë‹¤ìŒ 4ê°€ì§€ í•µì‹¬ ìš”ì†Œë¡œ êµ¬ì„±ë©ë‹ˆë‹¤ :

### 1ï¸âƒ£ Abstract Strategy (ì¶”ìƒ ì „ëµ)

**ğŸ“ íŒŒì¼ :** [Ability.cs](./Scripts/Abilities/Ability.cs)

```csharp
public abstract class Ability : ScriptableObject
{
    [SerializeField] protected string         m_AbilityName;
    [SerializeField] protected Sprite         m_ButtonIcon;
    [SerializeField] protected ParticleSystem m_ParticleSystem;
    [SerializeField] protected AudioClip      m_AudioClip;

    // ê° ì „ëµì€ ì»¤ìŠ¤í…€ ë¡œì§ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ Use ë©”ì„œë“œë¥¼ êµ¬í˜„í•œë‹¤
    public virtual void Use(GameObject gameObject)
    {
        Debug.Log($"ëŠ¥ë ¥ ì‚¬ìš© : {m_AbilityName}");
        PlaySound();
        PlayParticleFX();
    }
}
```

**ì—­í•  :**
- ëª¨ë“  ëŠ¥ë ¥ì´ ë”°ë¼ì•¼ í•  ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- ì‚¬ìš´ë“œ, íŒŒí‹°í´ ë“± ê³µí†µ ê¸°ëŠ¥ì€ ë² ì´ìŠ¤ í´ë˜ìŠ¤ì—ì„œ ì²˜ë¦¬
- `Use()` : ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•˜ëŠ” ë‹¨ì¼ ì§„ì…ì  (ì „ëµ ì‹¤í–‰)
- `ScriptableObject` ê¸°ë°˜ìœ¼ë¡œ ì¸ìŠ¤í™í„°ì—ì„œ ì—ì…‹ êµì²´ ê°€ëŠ¥

**ScriptableObjectë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ  :**

```
ì¼ë°˜ í´ë˜ìŠ¤ ë°©ì‹               ScriptableObject ë°©ì‹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì½”ë“œë¡œë§Œ êµì²´ ê°€ëŠ¥     vs     ì¸ìŠ¤í™í„°ì—ì„œ ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ êµì²´
ëŠ¥ë ¥ë§ˆë‹¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±  vs     ì—ì…‹ íŒŒì¼ë¡œ ê³µìœ  ê°€ëŠ¥
ëŸ°íƒ€ì„ í›„ ì‚¬ë¼ì§       vs     ì—ì…‹ìœ¼ë¡œ í”„ë¡œì íŠ¸ì— ì €ì¥
```

---

### 2ï¸âƒ£ Concrete Strategy (êµ¬ì²´ ì „ëµ)

**ğŸ“ íŒŒì¼ :**
- [AirSupportAbility.cs](./Scripts/Abilities/AirSupportAbility.cs)
- [FirstAidAbility.cs](./Scripts/Abilities/FirstAidAbility.cs)
- [RadarAbility.cs](./Scripts/Abilities/RadarAbility.cs)

```csharp
public class AirSupport : Ability
{
    // ê° ì „ëµì€ ê³ ìœ í•˜ê³  ë‹¤ì–‘í•œ ì»¤ìŠ¤í…€ ë¡œì§ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    // ì˜¤ë²„ë¼ì´ë“œëœ Use ë©”ì„œë“œì—ì„œ ì›í•˜ëŠ” ê²Œì„í”Œë ˆì´ ë¡œì§ì„ êµ¬í˜„í•œë‹¤
    public override void Use(GameObject gameObject)
    {
        base.Use(gameObject);  // ê³µí†µ ì‚¬ìš´ë“œ + íŒŒí‹°í´ ì¬ìƒ

        // í•­ê³µ ì§€ì› ì¶”ê°€ ë¡œì§ì„ ì—¬ê¸°ì— êµ¬í˜„í•œë‹¤
    }
}
```

**ì—­í•  :**
- `Ability`ë¥¼ ìƒì†ë°›ì•„ ê° ëŠ¥ë ¥ë§Œì˜ ê³ ìœ  ë¡œì§ êµ¬í˜„
- `base.Use()` í˜¸ì¶œë¡œ ê³µí†µ ê¸°ëŠ¥(ì‚¬ìš´ë“œ, íŒŒí‹°í´)ì€ ë¶€ëª¨ì—ê²Œ ìœ„ì„
- ê° í´ë˜ìŠ¤ëŠ” ìì‹ ì˜ ëŠ¥ë ¥ ë¡œì§ì—ë§Œ ì§‘ì¤‘

**ê° ëŠ¥ë ¥ë³„ íŠ¹ì„± :**

| ëŠ¥ë ¥ | íŒŒì¼ëª… | ì—­í•  |
|------|--------|------|
| í•­ê³µ ì§€ì› | AirSupportAbility.cs | ê³µì¤‘ í­ê²© ë˜ëŠ” ì§€ì› ìš”ì²­ |
| ì‘ê¸‰ì²˜ì¹˜ | FirstAidAbility.cs | í”Œë ˆì´ì–´ ì²´ë ¥ íšŒë³µ |
| ë ˆì´ë” | RadarAbility.cs | ì  ë˜ëŠ” ì˜¤ë¸Œì íŠ¸ íƒì§€ |

---

### 3ï¸âƒ£ Context (ì»¨í…ìŠ¤íŠ¸ / ì „ëµ ì‹¤í–‰ì)

**ğŸ“ íŒŒì¼ :** [AbilityRunner.cs](./Scripts/AbilityRunner.cs)

```csharp
public class AbilityRunner : MonoBehaviour
{
    [Tooltip("í˜„ì¬ ì‹¤í–‰í•  íŠ¹ìˆ˜ ëŠ¥ë ¥")] [SerializeField]
    private Ability m_CurrentAbility;

    [Tooltip("í˜„ì¬ ëŠ¥ë ¥ì„ ì‹¤í–‰í•  UI ë²„íŠ¼")] [SerializeField]
    private Button m_Button;

    // í”„ë¡œí¼í‹° : ì „ëµ êµì²´ ì‹œ UIë„ ìë™ ê°±ì‹ 
    public Ability CurrentAbility
    {
        get => m_CurrentAbility;
        set
        {
            m_CurrentAbility = value;
            UpdateButtonState();  // ë²„íŠ¼ ì•„ì´ì½˜ ìë™ ê°±ì‹ 
        }
    }

    public void OnAbilityButtonClicked()
    {
        if (m_CurrentAbility != null)
        {
            m_CurrentAbility.Use(this.gameObject);  // ì „ëµ ì‹¤í–‰
        }
    }
}
```

**ì—­í•  :**
- í˜„ì¬ ì „ëµ(`m_CurrentAbility`)ì„ ë“¤ê³  ìˆëŠ” **"ì „ëµ ì‹¤í–‰ ëŒ€ë¦¬ì¸"**
- êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ëŠ¥ë ¥ì¸ì§€ ëª°ë¼ë„ `Use()` í•˜ë‚˜ë¡œ ì‹¤í–‰
- ì „ëµì´ êµì²´ë˜ë©´ UI(ë²„íŠ¼ ì•„ì´ì½˜)ë„ ìë™ìœ¼ë¡œ ê°±ì‹ 

**ì»¨í…ìŠ¤íŠ¸ê°€ ì „ëµì„ ëª¨ë¥´ëŠ” ì´ìœ  :**

```
AbilityRunnerëŠ” AirSupportì¸ì§€ FirstAidì¸ì§€ Radarì¸ì§€ ëª¨ë¥¸ë‹¤.
ê·¸ì € "í˜„ì¬ ëŠ¥ë ¥ì˜ Use()ë¥¼ í˜¸ì¶œí•œë‹¤"ëŠ” ê²ƒë§Œ ì•ˆë‹¤.

â†’ ìƒˆ ëŠ¥ë ¥ì´ ì¶”ê°€ë˜ì–´ë„ AbilityRunner ì½”ë“œëŠ” í•œ ì¤„ë„ ìˆ˜ì •í•  í•„ìš” ì—†ìŒ!
```

---

### 4ï¸âƒ£ Strategy Switcher (ì „ëµ êµì²´ ë‹´ë‹¹)

**ğŸ“ íŒŒì¼ :** [StreakCounter.cs](./Scripts/StreakCounter.cs)

```csharp
[System.Serializable]
public struct AbilityThreshold
{
    public Ability ability;
    public int     minimumStreak;  // ì´ ëŠ¥ë ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ í•„ìš”í•œ ìµœì†Œ ì—°ì† ìˆ˜ì§‘ ìˆ˜
}

public class StreakCounter : MonoBehaviour
{
    [SerializeField] private List<AbilityThreshold> m_AbilityThresholds;
    [SerializeField] private AbilityRunner          m_AbilityRunner;

    // í˜„ì¬ ì—°ì† ìˆ˜ì§‘ ìˆ˜ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ê°€ì¥ ë†’ì€ ëŠ¥ë ¥ì„ ì‚¬ìš©í•˜ë„ë¡ AbilityRunnerë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤
    private void UpdateCurrentAbility()
    {
        // í˜„ì¬ ì—°ì† ìˆ˜ì§‘ ìˆ˜ë¥¼ ì´ˆê³¼í•˜ì§€ ì•ŠëŠ” ê°€ì¥ ë†’ì€ ì—°ì† ëŠ¥ë ¥ì„ ì°¾ëŠ”ë‹¤
        var highestAbility = m_AbilityThresholds
            .Where(x => x.minimumStreak <= m_CurrentStreak)
            .OrderByDescending(x => x.minimumStreak)
            .FirstOrDefault().ability;

        if (highestAbility != null)
        {
            m_AbilityRunner.CurrentAbility = highestAbility;  // ì „ëµ êµì²´!
        }
    }
}
```

**ì—­í•  :**
- ì•„ì´í…œ ìˆ˜ì§‘ ì—°ì† íšŸìˆ˜ì— ë”°ë¼ ëŠ¥ë ¥(ì „ëµ)ì„ ìë™ìœ¼ë¡œ êµì²´í•˜ëŠ” **"ì „ëµ ê²°ì •ì"**
- ì¸ìŠ¤í™í„°ì—ì„œ `AbilityThreshold` ëª©ë¡ì„ ì„¤ì •í•˜ì—¬ ì¡°ê±´-ëŠ¥ë ¥ ìŒì„ êµ¬ì„±
- ì¡°ê±´ ì¶©ì¡± ì‹œ `AbilityRunner.CurrentAbility`ì— ìƒˆ ì „ëµì„ ì£¼ì…

**ì „ëµ êµì²´ ì˜ˆì‹œ :**

```
ì—°ì† ìˆ˜ì§‘ 0ê°œ  â†’ ëŠ¥ë ¥ ì—†ìŒ
ì—°ì† ìˆ˜ì§‘ 3ê°œ  â†’ RadarAbility      í™œì„±í™” (ìµœì†Œ 3ê°œ)
ì—°ì† ìˆ˜ì§‘ 5ê°œ  â†’ FirstAidAbility   í™œì„±í™” (ìµœì†Œ 5ê°œ)
ì—°ì† ìˆ˜ì§‘ 10ê°œ â†’ AirSupportAbility í™œì„±í™” (ìµœì†Œ 10ê°œ)
```

---

## ğŸ“Š ì½”ë“œ êµ¬ì¡°

### í´ë” êµ¬ì¡°

```
8_Strategy/
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ Abilities/
â”‚   â”‚   â”œâ”€â”€ Ability.cs              â† ì¶”ìƒ ì „ëµ (ScriptableObject ê¸°ë°˜)
â”‚   â”‚   â”œâ”€â”€ AirSupportAbility.cs    â† êµ¬ì²´ ì „ëµ : í•­ê³µ ì§€ì›
â”‚   â”‚   â”œâ”€â”€ FirstAidAbility.cs      â† êµ¬ì²´ ì „ëµ : ì‘ê¸‰ì²˜ì¹˜
â”‚   â”‚   â””â”€â”€ RadarAbility.cs         â† êµ¬ì²´ ì „ëµ : ë ˆì´ë”
â”‚   â”‚
â”‚   â”œâ”€â”€ AbilityRunner.cs            â† ì»¨í…ìŠ¤íŠ¸ (ì „ëµ ì‹¤í–‰ì)
â”‚   â”œâ”€â”€ Collectible.cs              â† ìˆ˜ì§‘ ì˜¤ë¸Œì íŠ¸ (ì´ë²¤íŠ¸ ë°œí–‰)
â”‚   â”œâ”€â”€ GameEvents.cs               â† ì´ë²¤íŠ¸ ì±„ë„ (ì˜µì €ë²„ íŒ¨í„´)
â”‚   â””â”€â”€ StreakCounter.cs            â† ì—°ì† ìˆ˜ì§‘ ì¹´ìš´í„° (ì „ëµ êµì²´ ë‹´ë‹¹)
â”‚
â””â”€â”€ README.md                       â† ğŸ“ í˜„ì¬ ë¬¸ì„œ
```

### í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Ability           â”‚  â† ì¶”ìƒ ì „ëµ (ScriptableObject)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ # m_AbilityName           â”‚
â”‚ # m_ButtonIcon            â”‚
â”‚ # m_ParticleSystem        â”‚
â”‚ # m_AudioClip             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + Use(GameObject)         â”‚  â† ì „ëµ ì‹¤í–‰ ë©”ì„œë“œ
â”‚ + ButtonIcon              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–³
            â”‚ inherits
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         â”‚          â”‚
  â–¼         â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚AirSupportâ”‚ â”‚FirstAid  â”‚ â”‚ Radar    â”‚  â† êµ¬ì²´ ì „ëµ
â”‚Ability   â”‚ â”‚Ability   â”‚ â”‚Ability   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚          â”‚           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ ì£¼ì… (CurrentAbility = ability)
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       AbilityRunner       â”‚  â† ì»¨í…ìŠ¤íŠ¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - m_CurrentAbility        â”‚
â”‚ - m_Button                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + CurrentAbility { set }  â”‚
â”‚ + OnAbilityButtonClicked()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–³
            â”‚ ì „ëµ êµì²´
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       StreakCounter        â”‚  â† ì „ëµ êµì²´ ë‹´ë‹¹ì
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - m_AbilityThresholds     â”‚
â”‚ - m_AbilityRunner         â”‚
â”‚ - m_CurrentStreak         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + IncrementStreak()       â”‚
â”‚ - UpdateCurrentAbility()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–³
            â”‚ ì´ë²¤íŠ¸ êµ¬ë…
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        GameEvents         â”‚  â† ì´ë²¤íŠ¸ ì±„ë„ (ì˜µì €ë²„ íŒ¨í„´)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + OnCollectibleCollected  â”‚
â”‚ + CollectibleCollected()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–³
            â”‚ ì´ë²¤íŠ¸ ë°œí–‰
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Collectible        â”‚  â† ìˆ˜ì§‘ ì˜¤ë¸Œì íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìŠ¤í¬ë¦½íŠ¸ ì˜ì¡´ ê´€ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Collectible                         â”‚
â”‚             (í”Œë ˆì´ì–´ì™€ íŠ¸ë¦¬ê±° â†’ ì´ë²¤íŠ¸ ë°œí–‰)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ GameEvents.CollectibleCollected()
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GameEvents                            â”‚
â”‚              (ì •ì  ì´ë²¤íŠ¸ ì±„ë„)                           â”‚
â”‚        OnCollectibleCollected?.Invoke()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ ì´ë²¤íŠ¸ êµ¬ë… (+= IncrementStreak)
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   StreakCounter                          â”‚
â”‚           (ì—°ì† ìˆ˜ì§‘ ìˆ˜ ê´€ë¦¬ + ì „ëµ êµì²´)                  â”‚
â”‚                                                          â”‚
â”‚   AbilityThresholds : [(3, Radar), (5, FirstAid), ...]  â”‚
â”‚   â†’ ì¡°ê±´ ì¶©ì¡± ì‹œ : AbilityRunner.CurrentAbility = ...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ ì „ëµ ì£¼ì…
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AbilityRunner                         â”‚
â”‚           (í˜„ì¬ ì „ëµì„ ë“¤ê³  UI ë²„íŠ¼ìœ¼ë¡œ ì‹¤í–‰)              â”‚
â”‚                                                          â”‚
â”‚   m_CurrentAbility.Use(gameObject)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ Use() í˜¸ì¶œ
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Ability (AirSupport / FirstAid / Radar)            â”‚
â”‚           (ê³ ìœ  ë¡œì§ ì‹¤í–‰ + ì‚¬ìš´ë“œ + íŒŒí‹°í´)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ì‹¤í–‰ íë¦„

### 1ï¸âƒ£ ì´ˆê¸°í™” íë¦„

```
[ê²Œì„ ì‹œì‘]
    â¬‡ï¸
StreakCounter.OnEnable()
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GameEvents ì´ë²¤íŠ¸ êµ¬ë…             â”‚
â”‚   OnCollectibleCollected          â”‚
â”‚   += IncrementStreak              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
StreakCounter.Start()
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UpdateCurrentAbility() í˜¸ì¶œ       â”‚
â”‚ - í˜„ì¬ ì—°ì† ìˆ˜ì§‘ ìˆ˜ : 0ê°œ          â”‚
â”‚ - ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ëŠ¥ë ¥ ì—†ìŒ        â”‚
â”‚ â†’ ëŠ¥ë ¥ ì—†ìŒ (ë²„íŠ¼ ë¹„í™œì„±í™”)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
âœ… ì´ˆê¸°í™” ì™„ë£Œ! ëŠ¥ë ¥ ì—†ìŒ ìƒíƒœë¡œ ì‹œì‘
```

---

### 2ï¸âƒ£ ì•„ì´í…œ ìˆ˜ì§‘ íë¦„ (ì „ëµ êµì²´)

```
[í”Œë ˆì´ì–´ê°€ Collectibleì— ë‹¿ìŒ]
    â¬‡ï¸
Collectible.OnTriggerEnter()
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GameEvents.CollectibleCollected() â”‚
â”‚   â†’ OnCollectibleCollected.Invoke â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StreakCounter.IncrementStreak()   â”‚
â”‚   CurrentStreak++                 â”‚
â”‚   â†’ UpdateCurrentAbility() í˜¸ì¶œ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¡°ê±´ ì¶©ì¡± ëŠ¥ë ¥ íƒìƒ‰               â”‚
â”‚   AbilityThresholds ì¤‘             â”‚
â”‚   minimumStreak <= CurrentStreak  â”‚
â”‚   ì¸ ê²ƒë“¤ ì¤‘ ê°€ì¥ ë†’ì€ ê°’ ì„ íƒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AbilityRunner.CurrentAbility      â”‚
â”‚   = highestAbility                â”‚
â”‚ â†’ UpdateButtonState() ìë™ í˜¸ì¶œ  â”‚
â”‚ â†’ ë²„íŠ¼ ì•„ì´ì½˜ ê°±ì‹                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
âœ… ì „ëµ êµì²´ ì™„ë£Œ! UI ë²„íŠ¼ í™œì„±í™”
```

---

### 3ï¸âƒ£ ëŠ¥ë ¥ ì‚¬ìš© íë¦„

```
[UI ë²„íŠ¼ í´ë¦­]
    â¬‡ï¸
AbilityRunner.OnAbilityButtonClicked()
    â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ m_CurrentAbility.Use(gameObject)  â”‚
â”‚   â†“                               â”‚
â”‚ Ability.Use() (ë¶€ëª¨)              â”‚
â”‚   - Debug.Log("ëŠ¥ë ¥ ì‚¬ìš© : ...")  â”‚
â”‚   - PlaySound()                   â”‚
â”‚   - PlayParticleFX()              â”‚
â”‚   â†“                               â”‚
â”‚ [ìì‹ í´ë˜ìŠ¤].Use() (ì˜¤ë²„ë¼ì´ë“œ)   â”‚
â”‚   - ê³ ìœ  ëŠ¥ë ¥ ë¡œì§ ì‹¤í–‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â¬‡ï¸
âœ… ëŠ¥ë ¥ ì‹¤í–‰ ì™„ë£Œ!
```

---

## ğŸ’» ì£¼ìš” ì½”ë“œ ë¶„ì„

### ğŸ“Œ í•µì‹¬ ì½”ë“œ 1 : ì¶”ìƒ ì „ëµ (Ability)

**ìœ„ì¹˜ :** Ability.cs:18-24

```csharp
// ê° ì „ëµì€ ì»¤ìŠ¤í…€ ë¡œì§ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ Use ë©”ì„œë“œë¥¼ êµ¬í˜„í•œë‹¤
public virtual void Use(GameObject gameObject)
{
    // Use ë©”ì„œë“œëŠ” ì´ë¦„ì„ ë¡œê·¸ë¡œ ì¶œë ¥í•˜ê³ , ì‚¬ìš´ë“œì™€ íŒŒí‹°í´ ì´í™íŠ¸ë¥¼ ì¬ìƒí•œë‹¤
    Debug.Log($"ëŠ¥ë ¥ ì‚¬ìš© : {m_AbilityName}");
    PlaySound();
    PlayParticleFX();
}
```

**ì´í•´ í¬ì¸íŠ¸ :**
- `virtual` : ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥
- `base.Use()` í˜¸ì¶œë¡œ ê³µí†µ ê¸°ëŠ¥(ì‚¬ìš´ë“œ, íŒŒí‹°í´)ì„ ì¬ì‚¬ìš©
- ì™¸ë¶€ì—ì„œëŠ” ì–´ë–¤ Ability ì„œë¸Œí´ë˜ìŠ¤ì¸ì§€ ëª¨ë¥´ê³  `Use()` ë§Œ í˜¸ì¶œ

---

### ğŸ“Œ í•µì‹¬ ì½”ë“œ 2 : ì „ëµ êµì²´ (AbilityRunner í”„ë¡œí¼í‹°)

**ìœ„ì¹˜ :** AbilityRunner.cs:17-24

```csharp
public Ability CurrentAbility
{
    get => m_CurrentAbility;
    set
    {
        m_CurrentAbility = value;
        UpdateButtonState();  // âœ… í•µì‹¬ : ì „ëµ êµì²´ ì‹œ UI ìë™ ê°±ì‹ 
    }
}
```

**ì´í•´ í¬ì¸íŠ¸ :**
- `set` ì ‘ê·¼ìì—ì„œ ì „ëµ êµì²´ì™€ UI ê°±ì‹ ì„ **í•œ ë²ˆì— ì²˜ë¦¬**
- ì™¸ë¶€ì—ì„œ `CurrentAbility = newAbility` í•œ ì¤„ë¡œ ì „ëµ êµì²´ ì™„ë£Œ
- ì„¸í„°ê°€ ìˆê¸°ì— `StreakCounter`ê°€ `m_AbilityRunner.CurrentAbility = ability` ë¡œ ì£¼ì… ê°€ëŠ¥

---

### ğŸ“Œ í•µì‹¬ ì½”ë“œ 3 : ì „ëµ íƒìƒ‰ (StreakCounter)

**ìœ„ì¹˜ :** StreakCounter.cs:65-74

```csharp
// í˜„ì¬ ì—°ì† ìˆ˜ì§‘ ìˆ˜ë¥¼ ì´ˆê³¼í•˜ì§€ ì•ŠëŠ” ê°€ì¥ ë†’ì€ ì—°ì† ëŠ¥ë ¥ì„ ì°¾ëŠ”ë‹¤
var highestAbility = m_AbilityThresholds
    .Where(x => x.minimumStreak <= m_CurrentStreak)      // âœ… ì¡°ê±´ ì¶©ì¡± í•„í„°
    .OrderByDescending(x => x.minimumStreak)             // âœ… ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
    .FirstOrDefault().ability;                           // âœ… ìµœìƒìœ„ ëŠ¥ë ¥ ì„ íƒ
```

**ì´í•´ í¬ì¸íŠ¸ :**
- LINQë¥¼ í™œìš©í•œ ê°„ê²°í•œ ì „ëµ íƒìƒ‰
- ì¸ìŠ¤í™í„°ì—ì„œ `AbilityThreshold` ëª©ë¡ì„ ììœ ë¡­ê²Œ êµ¬ì„± ê°€ëŠ¥
- ìƒˆ ëŠ¥ë ¥ ì¶”ê°€ ì‹œ ì¸ìŠ¤í™í„°ì—ì„œ í•­ëª©ë§Œ ì¶”ê°€í•˜ë©´ ë¨ (ì½”ë“œ ìˆ˜ì • ì—†ìŒ)

---

### ğŸ“Œ í•µì‹¬ ì½”ë“œ 4 : ì˜µì €ë²„ íŒ¨í„´ ì—°ë™

**ìœ„ì¹˜ :** Collectible.cs:10-22, GameEvents.cs:8-17

ì´ í”„ë¡œì íŠ¸ëŠ” **Strategy íŒ¨í„´ + Observer íŒ¨í„´**ì´ í•¨ê»˜ ì‚¬ìš©ë˜ëŠ” ì¢‹ì€ ì˜ˆì‹œì…ë‹ˆë‹¤ :

```csharp
// Collectible â†’ GameEvents ì´ë²¤íŠ¸ ë°œí–‰
private void OnTriggerEnter(Collider other)
{
    if (other.CompareTag("Player"))
    {
        GameEvents.CollectibleCollected();  // âœ… ì´ë²¤íŠ¸ ë°œí–‰
        Destroy(gameObject);
    }
}

// StreakCounter â†’ ì´ë²¤íŠ¸ êµ¬ë… í›„ ì „ëµ êµì²´
private void OnEnable()
{
    GameEvents.OnCollectibleCollected += IncrementStreak;  // âœ… êµ¬ë…
}
```

**ì „ì²´ ì—°ë™ íë¦„ :**

```
â‘  Collectible ìˆ˜ì§‘ â†’ GameEvents ì´ë²¤íŠ¸ ë°œí–‰
          â¬‡ï¸
â‘¡ StreakCounter.IncrementStreak() ìë™ í˜¸ì¶œ (ì˜µì €ë²„ íŒ¨í„´)
          â¬‡ï¸
â‘¢ ì—°ì† ìˆ˜ì§‘ ìˆ˜ ì¦ê°€ â†’ ì¡°ê±´ ì¶©ì¡± ì „ëµ íƒìƒ‰
          â¬‡ï¸
â‘£ AbilityRunner.CurrentAbility = ìƒˆ ì „ëµ (ì „ëµ íŒ¨í„´)
          â¬‡ï¸
â‘¤ UI ë²„íŠ¼ ì•„ì´ì½˜ ê°±ì‹ 
```

**ì´í•´ í¬ì¸íŠ¸ :**
- `GameEvents`ëŠ” ì •ì (static) ì´ë²¤íŠ¸ ì±„ë„ ì—­í• 
- Collectibleì€ ëˆ„ê°€ êµ¬ë… ì¤‘ì¸ì§€ ëª¨ë¦„ (ëŠìŠ¨í•œ ê²°í•©)
- ë‘ íŒ¨í„´ì´ í˜‘ë ¥í•˜ì—¬ **"ì•„ì´í…œ ìˆ˜ì§‘ â†’ ëŠ¥ë ¥ ìë™ êµì²´"** ë¥¼ êµ¬í˜„

---

## âš–ï¸ ì¥ë‹¨ì 

### âœ… ì¥ì 

**1. ê°œë°©-íì‡„ ì›ì¹™ (OCP) ì¤€ìˆ˜**
- ìƒˆë¡œìš´ ì „ëµ ì¶”ê°€ ì‹œ ìƒˆ í´ë˜ìŠ¤ë§Œ ìƒì„±
- ì»¨í…ìŠ¤íŠ¸(AbilityRunner) ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

**2. ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP) ì¤€ìˆ˜**
- ê° ëŠ¥ë ¥ í´ë˜ìŠ¤ê°€ ìì‹ ì˜ ë¡œì§ë§Œ ë‹´ë‹¹
- AbilityRunnerëŠ” "ì‹¤í–‰"ë§Œ, StreakCounterëŠ” "êµì²´ ê²°ì •"ë§Œ ë‹´ë‹¹

**3. ëŸ°íƒ€ì„ êµì²´**
- ê²Œì„ ì‹¤í–‰ ì¤‘ ì „ëµì„ ë™ì ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
- ì¡°ê±´ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìµœì ì˜ ì „ëµ ì„ íƒ

**4. ì½”ë“œ ì¬ì‚¬ìš©**
- ë™ì¼í•œ ì „ëµ(Ability ScriptableObject)ì„ ì—¬ëŸ¬ ìºë¦­í„°ê°€ ê³µìœ  ê°€ëŠ¥
- ScriptableObject ì—ì…‹ì´ë¯€ë¡œ ì”¬/í”„ë¡œì íŠ¸ ê°„ ì¬ì‚¬ìš© ìš©ì´

**5. ì¡°ê±´ë¬¸ ì œê±°**
- switch/if ì²´ì¸ ì—†ì´ ë‹¤í˜•ì„±ìœ¼ë¡œ í–‰ë™ ë¶„ê¸°
- ì½”ë“œ ê°€ë…ì„± í–¥ìƒ

**6. ì¸ìŠ¤í™í„° ì¹œí™”ì **
- ScriptableObject ê¸°ë°˜ìœ¼ë¡œ ë””ìì´ë„ˆë„ ì¸ìŠ¤í™í„°ì—ì„œ ì „ëµ êµì²´ ê°€ëŠ¥
- í”„ë¡œê·¸ë˜ë¨¸ ì—†ì´ ìƒˆ ëŠ¥ë ¥ ì¡°í•© í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

### âŒ ë‹¨ì 

**1. í´ë˜ìŠ¤ ìˆ˜ ì¦ê°€**
- ì „ëµ í•˜ë‚˜ë‹¹ í´ë˜ìŠ¤ í•˜ë‚˜ í•„ìš”
- ì†Œê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê³¼ë„í•  ìˆ˜ ìˆìŒ

**2. ê°ì²´ ìƒì„± ë¹„ìš©**
- ì „ëµ ë¹ˆë²ˆ êµì²´ ì‹œ ë©”ëª¨ë¦¬ ê´€ë¦¬ í•„ìš”
- ScriptableObject ì‚¬ìš© ì‹œ ê³µìœ ë¡œ ì™„í™” ê°€ëŠ¥

**3. ì´í•´ë„ í•„ìš”**
- ì „ëµ êµ¬ì¡°ì™€ êµì²´ ë°©ì‹ì„ íŒ€ì›ì´ ë¯¸ë¦¬ ìˆ™ì§€í•´ì•¼ í•¨
- íŒ¨í„´ì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ë©´ ì½”ë“œ íë¦„ íŒŒì•…ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ

**4. ì „ëµ ê°„ ë°ì´í„° ê³µìœ  ì–´ë ¤ì›€**
- ì „ëµ í´ë˜ìŠ¤ë“¤ì´ ì„œë¡œì˜ ë°ì´í„°ë¥¼ ì§ì ‘ ê³µìœ í•˜ê¸° ì–´ë ¤ì›€
- ì»¨í…ìŠ¤íŠ¸ë¥¼ í†µí•œ ìš°íšŒ ì ‘ê·¼ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ

---

## ğŸ® ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€

### 1ï¸âƒ£ Unity URP - Renderer Feature

URPì˜ `ScriptableRendererFeature`ëŠ” **ì „ëµ íŒ¨í„´ì˜ ì‹¤ì œ êµ¬í˜„**ì…ë‹ˆë‹¤ :

```csharp
// ì¶”ìƒ ì „ëµ (Unity ë‚´ë¶€ êµ¬í˜„)
public abstract class ScriptableRendererFeature : ScriptableObject
{
    public abstract void Create();
    public abstract void AddRenderPasses(ScriptableRenderer renderer, ref RenderingData renderingData);
}

// êµ¬ì²´ ì „ëµë“¤
public class ScreenSpaceShadows : ScriptableRendererFeature { ... }
public class DecalRendererFeature : ScriptableRendererFeature { ... }
public class FullScreenPassRendererFeature : ScriptableRendererFeature { ... }
```

```
ê°œë°œìëŠ” ì¸ìŠ¤í™í„°ì—ì„œ Renderer Featureë¥¼ ì¶”ê°€/êµì²´ë¡œ
ì—”ì§„ í•µì‹¬ ì½”ë“œë¥¼ ê±´ë“œë¦¬ì§€ ì•Šê³  ë Œë”ë§ íŒŒì´í”„ë¼ì¸ì„ í™•ì¥!
â†’ ì™„ë²½í•œ OCP ì¤€ìˆ˜
```

---

### 2ï¸âƒ£ ë¬´ê¸° ì‹œìŠ¤í…œ

```csharp
// ì¶”ìƒ ì „ëµ
public abstract class WeaponStrategy : ScriptableObject
{
    public abstract void Attack(Transform attackPoint, float damage);
}

// êµ¬ì²´ ì „ëµ
public class SwordStrategy : WeaponStrategy
{
    public override void Attack(Transform attackPoint, float damage)
    {
        // ê·¼ê±°ë¦¬ ì›í˜• ë²”ìœ„ ê³µê²©
        Collider[] hits = Physics.OverlapSphere(attackPoint.position, 1.5f);
        foreach (var hit in hits) { /* ë°ë¯¸ì§€ ì ìš© */ }
    }
}

public class BowStrategy : WeaponStrategy
{
    public override void Attack(Transform attackPoint, float damage)
    {
        // í™”ì‚´ ë°œì‚¬ (ì›ê±°ë¦¬ ê³µê²©)
        Instantiate(arrowPrefab, attackPoint.position, attackPoint.rotation);
    }
}

// ì»¨í…ìŠ¤íŠ¸
public class PlayerCombat : MonoBehaviour
{
    [SerializeField] private WeaponStrategy m_CurrentWeapon;

    public void Attack()
    {
        m_CurrentWeapon.Attack(attackPoint, baseDamage);
    }
}
```

---

### 3ï¸âƒ£ AI ì´ë™ ì „ëµ

```csharp
// ì¶”ìƒ ì „ëµ
public abstract class MovementStrategy : MonoBehaviour
{
    public abstract Vector3 CalculateNextPosition(Transform agent, Transform target);
}

// êµ¬ì²´ ì „ëµ : ì§ì„  ì´ë™
public class DirectMovement : MovementStrategy
{
    public override Vector3 CalculateNextPosition(Transform agent, Transform target)
    {
        return Vector3.MoveTowards(agent.position, target.position, speed * Time.deltaTime);
    }
}

// êµ¬ì²´ ì „ëµ : ì§€ê·¸ì¬ê·¸ ì´ë™
public class ZigZagMovement : MovementStrategy
{
    public override Vector3 CalculateNextPosition(Transform agent, Transform target)
    {
        // ì§€ê·¸ì¬ê·¸ ê²½ë¡œ ê³„ì‚°
        float zigzag = Mathf.Sin(Time.time * frequency) * amplitude;
        Vector3 direction = (target.position - agent.position).normalized;
        return agent.position + direction * speed * Time.deltaTime + Vector3.right * zigzag;
    }
}

// ì»¨í…ìŠ¤íŠ¸ (ë‚œì´ë„ì— ë”°ë¼ ì „ëµ êµì²´)
public class Enemy : MonoBehaviour
{
    [SerializeField] private MovementStrategy m_EasyMovement;
    [SerializeField] private MovementStrategy m_HardMovement;
    private MovementStrategy                  m_CurrentMovement;

    void Start()
    {
        m_CurrentMovement = GameManager.IsHardMode ? m_HardMovement : m_EasyMovement;
    }

    void Update()
    {
        Vector3 nextPos = m_CurrentMovement.CalculateNextPosition(transform, player);
        transform.position = nextPos;
    }
}
```

---

### 4ï¸âƒ£ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜

```csharp
// ì¶”ìƒ ì „ëµ
public interface ISortStrategy
{
    List<int> Sort(List<int> data);
}

// êµ¬ì²´ ì „ëµ
public class BubbleSortStrategy : ISortStrategy
{
    public List<int> Sort(List<int> data) { /* ë²„ë¸” ì •ë ¬ */ return data; }
}

public class QuickSortStrategy : ISortStrategy
{
    public List<int> Sort(List<int> data) { /* í€µ ì •ë ¬ */ return data; }
}

// ì»¨í…ìŠ¤íŠ¸ (ë°ì´í„° í¬ê¸°ì— ë”°ë¼ ì „ëµ ì„ íƒ)
public class SortContext
{
    private ISortStrategy m_Strategy;

    public void SetStrategy(int dataSize)
    {
        m_Strategy = dataSize < 100
            ? new BubbleSortStrategy()   // ì†Œê·œëª¨ : ë²„ë¸” ì •ë ¬
            : new QuickSortStrategy();   // ëŒ€ê·œëª¨ : í€µ ì •ë ¬
    }

    public List<int> Sort(List<int> data)
    {
        return m_Strategy.Sort(data);
    }
}
```

---

## ğŸ” State Patternê³¼ì˜ ë¹„êµ

State Patternê³¼ Strategy Patternì€ êµ¬ì¡°ê°€ ìœ ì‚¬í•˜ì§€ë§Œ **ëª©ì ê³¼ ì „ëµ êµì²´ ì£¼ì²´ê°€ ë‹¤ë¦…ë‹ˆë‹¤** :

| í•­ëª© | Strategy Pattern | State Pattern |
|------|-----------------|---------------|
| **ëª©ì ** | ì•Œê³ ë¦¬ì¦˜ êµì²´ | ìƒíƒœì— ë”°ë¥¸ í–‰ë™ ë³€ê²½ |
| **êµì²´ ì£¼ì²´** | ì™¸ë¶€(í´ë¼ì´ì–¸íŠ¸)ê°€ ì „ëµ ì£¼ì… | ìƒíƒœ ìì‹  ë˜ëŠ” StateMachineì´ ì „í™˜ |
| **êµì²´ ì‹œì ** | í´ë¼ì´ì–¸íŠ¸ê°€ ì›í•  ë•Œ | ì¡°ê±´ ì¶©ì¡± ì‹œ ìë™ ì „í™˜ |
| **ìƒíƒœ ì¸ì‹** | ì»¨í…ìŠ¤íŠ¸ëŠ” ì „ëµ êµì²´ ëª¨ë¦„ | ìƒíƒœë“¤ì´ ì„œë¡œë¥¼ ì•Œê±°ë‚˜ SM í†µí•´ ì „í™˜ |
| **Unity ì˜ˆì‹œ** | ëŠ¥ë ¥ ì‹œìŠ¤í…œ, ë¬´ê¸° ì‹œìŠ¤í…œ | í”Œë ˆì´ì–´ ìƒíƒœ, ì  AI |

**í•µì‹¬ ì°¨ì´ì  :**

```
Strategy Pattern :
  "ì–´ë–¤ ëŠ¥ë ¥ì„ ì“¸ì§€ëŠ” ë‚´(StreakCounter)ê°€ ê²°ì •í•´ì„œ AbilityRunnerì—ê²Œ ì¤€ë‹¤"
  â†’ ì „ëµì€ ìˆ˜ë™ì , ì™¸ë¶€ì—ì„œ êµì²´í•´ì¤Œ

State Pattern :
  "IdleStateëŠ” ìŠ¤ìŠ¤ë¡œ WalkStateë¡œ ë°”ê¿”ë‹¬ë¼ê³  StateMachineì—ê²Œ ìš”ì²­í•œë‹¤"
  â†’ ìƒíƒœëŠ” ëŠ¥ë™ì , ìŠ¤ìŠ¤ë¡œ ì „í™˜ì„ ìš”ì²­í•¨
```

---

## ğŸ“ í•™ìŠµ ì •ë¦¬

### í•µì‹¬ ê°œë…

**ì „ëµ íŒ¨í„´ì˜ ë³¸ì§ˆ :**
```
ì•Œê³ ë¦¬ì¦˜(ë™ì‘)ì„ ë³„ë„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬
ëŸ°íƒ€ì„ì— ììœ ë¡­ê²Œ êµì²´í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” íŒ¨í„´
```

### ì£¼ìš” êµ¬ì„± ìš”ì†Œ

```
Abstract Strategy (ì¶”ìƒ ì „ëµ)
  â†“
  Ability - Use(GameObject) ì •ì˜

Concrete Strategy (êµ¬ì²´ ì „ëµ)
  â†“
  AirSupport / FirstAid / Radar

Context (ì»¨í…ìŠ¤íŠ¸)
  â†“
  AbilityRunner - í˜„ì¬ ì „ëµ ë³´ìœ  ë° ì‹¤í–‰

Strategy Switcher (ì „ëµ êµì²´ ë‹´ë‹¹)
  â†“
  StreakCounter - ì¡°ê±´ì— ë”°ë¼ ì „ëµ ì£¼ì…
```

### ì „ëµ êµì²´ íë¦„

```
ì¡°ê±´ ë°œìƒ â†’ ì „ëµ ì„ íƒ â†’ ì»¨í…ìŠ¤íŠ¸ì— ì£¼ì… â†’ ì „ëµ ì‹¤í–‰
(ìˆ˜ì§‘ +1)  (Ability íƒìƒ‰)  (CurrentAbility =)  (Use() í˜¸ì¶œ)
```

### ì–¸ì œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

**âœ… ì „ëµ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ê²½ìš° :**
- **ë¹„ìŠ·í•œ í–‰ë™**ì´ ì—¬ëŸ¬ ê°œ ìˆê³  ì„¸ë¶€ êµ¬í˜„ë§Œ ë‹¤ë¥¼ ë•Œ
- ëŸ°íƒ€ì„ì— **ë™ì ìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ êµì²´**í•´ì•¼ í•  ë•Œ
- switch-caseë¡œ ì¸í•œ **ìŠ¤íŒŒê²Œí‹° ì½”ë“œ** ë°©ì§€ê°€ í•„ìš”í•  ë•Œ
- ëŠ¥ë ¥/ë¬´ê¸°/AI ì „ëµì²˜ëŸ¼ **"êµì²´ ê°€ëŠ¥í•œ ë¶€í’ˆ"** ì„¤ê³„ ì‹œ

**âŒ ì „ëµ íŒ¨í„´ì„ í”¼í•´ì•¼ í•˜ëŠ” ê²½ìš° :**
- ì „ëµì´ 2ê°œ ì´í•˜ì¸ ê°„ë‹¨í•œ ê²½ìš° (if-elseê°€ ë” ê°„ë‹¨)
- ì „ëµ ê°„ ì°¨ì´ê°€ ë¯¸ë¯¸í•˜ì—¬ í´ë˜ìŠ¤ ë¶„ë¦¬ê°€ ê³¼ë„í•œ ê²½ìš°
- ì„±ëŠ¥ì´ ë§¤ìš° ì¤‘ìš”í•œ ë£¨í”„ì—ì„œ ì¦ì€ ì „ëµ êµì²´

### ê´€ë ¨ íŒ¨í„´

| íŒ¨í„´ | ê´€ê³„ |
|------|------|
| **Observer** | GameEventsë¥¼ í†µí•´ ìˆ˜ì§‘ ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬, ì „ëµ êµì²´ë¥¼ íŠ¸ë¦¬ê±° |
| **State** | êµ¬ì¡°ê°€ ìœ ì‚¬í•˜ì§€ë§Œ êµì²´ ì£¼ì²´ê°€ ë‹¤ë¦„ (ì™¸ë¶€ vs ë‚´ë¶€) |
| **ScriptableObject** | Unityì—ì„œ ì „ëµì„ ì—ì…‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê´€ìš© íŒ¨í„´ |

### ë§ˆë¬´ë¦¬

ì „ëµ íŒ¨í„´ì€ **OCPë¥¼ ì‹¤í˜„í•˜ëŠ” ê°€ì¥ ì§ê´€ì ì¸ ë°©ë²•** ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.

**ê¸°ì–µí•  ì  :**
- âœ… ì•Œê³ ë¦¬ì¦˜ì„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬ êµì²´ ê°€ëŠ¥í•˜ê²Œ
- âœ… ì»¨í…ìŠ¤íŠ¸ëŠ” êµ¬ì²´ì ì¸ ì „ëµì„ ëª°ë¼ë„ ì‹¤í–‰ ê°€ëŠ¥
- âœ… ScriptableObject í™œìš© ì‹œ ì¸ìŠ¤í™í„°ì—ì„œ êµì²´ ê°€ëŠ¥
- âš ï¸ ì „ëµì´ ë§ì•„ì§€ë©´ í´ë˜ìŠ¤ ìˆ˜ê°€ ì¦ê°€í•˜ë¯€ë¡œ ì ì ˆíˆ ì„¤ê³„
- ğŸ¯ Unity URPì˜ Renderer Featureê°€ ëŒ€í‘œì ì¸ ì‹¤ì œ êµ¬í˜„ ì‚¬ë¡€

---

**ì‘ì„±ì¼ :** 2026.02.26
**ì°¸ê³  ìë£Œ :** Unity Korea - Level Up Your Code with Design Patterns and SOLID
**ë¸”ë¡œê·¸ :** [ì „ëµ íŒ¨í„´(Strategy Pattern) ì •ë¦¬](https://tae-woong.tistory.com/169)
